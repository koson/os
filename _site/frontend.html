<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    <link rel="stylesheet" type="text/css" href="/os/stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="/os/stylesheets/pygment_trac.css" media="screen">
    <link rel="stylesheet" type="text/css" href="/os/stylesheets/print.css" media="print">

    <title> Frontend |  OS-1 Oscilloscope Project</title>
  </head>

  <body>

      <header>
          <div class="container">
            <h1><a href="/os/" class="title">OS-1 Oscilloscope Project</a></h1>
             <h4>Frontend</h4> 

            <section id="downloads">
            <!--<a href="https://github.com/cpavlina/os/zipball/master" class="btn">Download as .zip</a>
                <a href="https://github.com/cpavlina/os/tarball/master" class="btn">Download as .tar.gz</a>-->
            <a href="https://github.com/cpavlina/os" class="btn btn-github"><span class="icon"></span>View on GitHub</a>
            </section>
          </div>
      </header>

    <div class="container">
        <section id="main_content">

            <p>The OS-1’s frontend is the usual oscilloscope frontend design: a compensated,
switched attenuator, a switched termination, a switched bypass around an
AC coupling capacitor, and diode clamps to protect the circuit. This feeds
a buffer, allowing the following circuitry to be implemented in a more sane,
low-impedance fashion without piles of compensation.</p>

<p><a href="https://raw.githubusercontent.com/cpavlina/os/master/Frontend/Planning/Attens.png"><img src="https://raw.githubusercontent.com/cpavlina/os/master/Frontend/Planning/Attens.png" alt="Attenuator schematic" /></a></p>

<ul>
  <li>A gas discharge tube provides a bit of extra protection against input overloads
      without adding to input leakage or nonlinearity.</li>
  <li>C1 adds to the relatively low capacitance of thei nput to
      give the standard 11 – 12 pF input capacitance.</li>
  <li>R1 damps any resonance formed between C1 and
      any parasitic inductance. Its effect is negligible over most of the
      bandwidth.</li>
  <li>R2 – R5 are a 50 Ω parallel termination, switched by K1.</li>
  <li>R6 forms a series termination on the signal, impeding large
      currents on sharp edges and preventing them from ringing with parasitics.
      This causes a bit of response rolloff, well past the planned bandwidth.</li>
  <li>K2 bypasses the 40 dB attenuator for small signals.</li>
  <li>R10 – R12 forms a standard 9M / 1M attenuator in series with the normal
      1M input.</li>
  <li>R7 – R9 adds additional loading to bring the attenuator input impedance to 1M.</li>
  <li>C3 provides a load capacitance for the attenuator, allowing the compensation
      capacitor to be of a reasonable size; C2 is that compensation capacitor.</li>
  <li>R13 damps parasitic resonances, like R1.</li>
  <li>R14 – R16 form the input resistance of the frontend.</li>
  <li>C4 and R17 provide frequency compensation for this input resistance.</li>
  <li>C5 is the AC coupling capacitor; K3 bypasses it. Due to the relatively high impedances
      present, it does not need to be a particularly low-inductance type; it will
      likely be a high voltage film capacitor to allow it to stand off the full
      voltage rating of the oscilloscope.</li>
  <li>D1 is a dual series diode, providing input clamping if the amplifier saturates.</li>
  <li>R18 slightly compensates for the capacitance of D1.</li>
</ul>

<p><a href="https://raw.githubusercontent.com/cpavlina/os/master/Frontend/Planning/Amplifier.png"><img src="https://raw.githubusercontent.com/cpavlina/os/master/Frontend/Planning/Amplifier.png" alt="Amplifier schematic" /></a></p>

<ul>
  <li>The input amplifier is an <a href="http://www.analog.com/media/en/technical-documentation/data-sheets/ADA4817-1_4817-2.pdf">Analog Devices ADA4817-1</a>,
      a “FastFET” op amp with both very high input impedance and very high bandwidth. It is
      one of the few single op amps that could function as the input buffer all by itself!
      This is configured to provide inverting unity gain, making frequency compensation simpler.</li>
  <li>R19 provides a DC offset to the summing junction, serving as the main vertical offset control.</li>
  <li>A2 is one-third of an <a href="http://www.analog.com/media/en/technical-documentation/data-sheets/AD8003.pdf">AD8003</a>
      triple high speed op amp, providing an extra 18 dB gain for low ranges.</li>
  <li>A3 is a voltage-controlled variable gain amplifier. Frequency compensation is done using
      an inductor, to keep the transconductance-amplifier drive current within limits.
      A capacitor parallel to R26 would have caused the current at high frequencies to
      exceed the limit, causing distortion.</li>
  <li>A4 provides one more single-ended gain stage, at 12 dB.</li>
  <li>A5 provides 12 dB gain and single-ended to differential conversion. 6 dB will be lost in the
      termination.</li>
</ul>



        </section>
    </div>

    
  </body>
</html>
